@using Sandbox;
@using Sandbox.UI;
@inherits PanelComponent

<root>
	<div class="pointer"></div>

	@if(Manager.Instance.DoesPlayerExist0)
	{
		var player0 = Manager.Instance.GetPlayer(0);

		<div class="bottom_row" style="left: 100px; bottom: 45px; flex-direction: row;">
			<div class="player_name" style="color: #0000aa;">@(Manager.Instance.GetConnection(0).DisplayName)</div>
		</div>

		<div class="bottom_row" style="left: 100px; bottom: 10px; flex-direction: row;">
			@for(int i = 0; i < player0.MaxHP; i++)
			{
				<div class="player_hp" style="opacity:@(player0.HP > i ? 1f : 0.15f);">@(player0.HP > i ? "❤️" : "🖤")</div>
			}
		</div>
	}
	
	@if(Manager.Instance.DoesPlayerExist0)
	{
		var player1 = Manager.Instance.GetPlayer(0);

		<div class="bottom_row" style="right: 100px; bottom: 45px; flex-direction: row-reverse;">
			<div class="player_name">@(Manager.Instance.GetConnection(0).DisplayName)</div>
		</div>

		<div class="bottom_row" style="right: 100px; bottom: 10px; flex-direction: row-reverse;">
			@for(int i = 0; i < player1.MaxHP; i++)
			{
				<div class="player_hp" style="opacity:@(player1.HP > i ? 1f : 0.15f);">@(player1.HP > i ? "❤️" : "🖤")</div>
			}
		</div>
	}
</root>

@code
{
	public static Hud Instance { get; private set; }

	public int HashNum { get; set; } = 0;

	protected override void OnAwake()
	{
		base.OnAwake();

		Instance = this;
	}

	protected override int BuildHash()
	{
		var player0 = Manager.Instance.GetPlayer(0);
		var player1 = Manager.Instance.GetPlayer(1);
		var playerName0 = Manager.Instance.GetConnection(0)?.DisplayName ?? "";
		var playerName1 = Manager.Instance.GetConnection(1)?.DisplayName ?? "";
		var hp0 = player0?.HP ?? 0;
		var hp1 = player1?.HP ?? 0;


		return HashCode.Combine(playerName0, playerName1, hp0, hp1);
	}
}
