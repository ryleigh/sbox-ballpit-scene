@using Sandbox;
@using Sandbox.UI;
@inherits Panel

<style>
	UpgradeIcon {
		width: 60px;
		height: 60px;
		background-color: #ff0000;
		justify-content: center;
		align-items: center;
		font-weight: bold;
		border-radius: 2px;
		pointer-events: all;
		margin: 4px;
		
		.bg {
			position: absolute;
			width: 100%;
			height: 100%;
			aspect-ratio: 1;
			background-size: cover;
			pointer-events: none;
		}

		.level {
			position: absolute;
			top: -10px;
			right: -10px;
			width: 30px;
			height: 30px;
			font-size: 32px;
			font-family: Poppins;
			color: #fff;
			text-align: center;
			justify-content: center;
			align-items: center;
			pointer-events: none;
			text-shadow: 2px 2px 2px black;
		}
	}
</style>

<root>
	<div class="bg" style="background-image: url(@($"materials/icons/{Globals.GetIconForUpgrade(UpgradeType)}.png"));"></div>
	<div class="level">@($"{Level}")</div>
</root>

@code
{
	public UpgradeType UpgradeType { get; set; }
	public int Level { get; set; }

	protected override int BuildHash() => System.HashCode.Combine(Time.Now);

	protected override void OnMouseOver(MousePanelEvent e)
	{
		Manager.Instance.HoveredUpgradeType = UpgradeType;
		// Manager.Instance.HoveredUpgradePos = new Vector2(Position.x, Position.y);
	}

	protected override void OnMouseOut(MousePanelEvent e)
	{
		Manager.Instance.HoveredUpgradeType = UpgradeType.None;
	}
}
